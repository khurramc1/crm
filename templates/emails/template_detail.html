{% extends "base.html" %}
{% load static %}

{% block title %}{{ template.name }} - Email Template{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-6">
    <div class="flex justify-between items-center">
        <h1 class="text-3xl font-bold">{{ template.name }}</h1>
        <a href="{% url 'emails:template_list' %}" class="text-blue-600 hover:underline">‚Üê Back to Templates</a>
    </div>

    <!-- Template Info -->
    <div class="bg-white rounded-lg shadow p-6 space-y-4">
        <div class="grid grid-cols-2 gap-4">
            <div>
                <label class="text-sm text-gray-600">Subject</label>
                <p class="font-medium">{{ template.subject }}</p>
            </div>
            <div>
                <label class="text-sm text-gray-600">From Email</label>
                <p class="font-medium">{{ template.from_email }}</p>
            </div>
            <div>
                <label class="text-sm text-gray-600">From Name</label>
                <p class="font-medium">{{ template.from_name }}</p>
            </div>
            <div>
                <label class="text-sm text-gray-600">Created By</label>
                <p class="font-medium">{{ template.created_by.get_full_name|default:template.created_by.username }}</p>
            </div>
            <div>
                <label class="text-sm text-gray-600">Created</label>
                <p class="font-medium">{{ template.created_at|date:"M d, Y H:i" }}</p>
            </div>
            <div>
                <label class="text-sm text-gray-600">Updated</label>
                <p class="font-medium">{{ template.updated_at|date:"M d, Y H:i" }}</p>
            </div>
        </div>
    </div>

    <!-- Merge Tags Help -->
    <div class="bg-blue-50 rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold text-blue-900 mb-3">Available Merge Tags</h3>
        <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
            {% verbatim %}
            <code class="bg-blue-100 px-3 py-2 rounded text-sm">{{first_name}}</code>
            <code class="bg-blue-100 px-3 py-2 rounded text-sm">{{last_name}}</code>
            <code class="bg-blue-100 px-3 py-2 rounded text-sm">{{full_name}}</code>
            <code class="bg-blue-100 px-3 py-2 rounded text-sm">{{email}}</code>
            <code class="bg-blue-100 px-3 py-2 rounded text-sm">{{phone}}</code>
            <code class="bg-blue-100 px-3 py-2 rounded text-sm">{{company_name}}</code>
            {% endverbatim %}
        </div>
        <p class="text-sm text-gray-600 mt-3">These tags will be replaced with contact information when sending emails.</p>
    </div>

    <!-- HTML Body -->
    <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold mb-4">HTML Body</h3>
        <div class="bg-gray-50 border rounded p-4 font-mono text-sm overflow-x-auto">
            <pre>{{ template.html_body }}</pre>
        </div>
    </div>

    <!-- Plain Text Body -->
    <div class="bg-white rounded-lg shadow p-6">
        <h3 class="text-lg font-semibold mb-4">Plain Text Body</h3>
        <div class="bg-gray-50 border rounded p-4 font-mono text-sm overflow-x-auto">
            <pre>{{ template.plain_body }}</pre>
        </div>
    </div>

    <!-- Actions -->
    <div class="flex gap-2">
        <a href="{% url 'emails:template_update' template.id %}" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
            Edit
        </a>
        <a href="{% url 'emails:template_delete' template.id %}" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
            Delete
        </a>
        <a href="{% url 'emails:campaign_create' %}" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
            Use in Campaign
        </a>
    </div>
</div>
{% endblock %}
